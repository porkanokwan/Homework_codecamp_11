<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab variable scope</title>
  </head>
  <body>
    <script>
      // Lab 1
      //   let name = "John";
      //   function sayHi() {
      //     alert("Hi, " + name);
      //   }
      //   name = "Pete";
      //   sayHi(); // "Hi, Pete" เพราะ เปลี่ยนค่า name ก่อนที่จะเรียกใช้ function

      //   Lab 2
      //   function makeWorker() {
      //     let name = "Pete";
      //     return function () {
      //       alert(name);
      //     };
      //   }
      //   let name = "John";
      //   let work = makeWorker();
      //   work(); // Pete เพราะ ใช้ name ที่อยู่ใน scope ของ function

      //   Lab 3
      // let phrase = "Hello";
      // if (true) {
      //   let user = "John";
      //   function sayHi() {
      //     alert(`${phrase}, ${user}`);
      //   }
      // }
      // sayHi(); // "Hello, John" เพราะ phrase ใน sayHi อยู่ภายใต้ scope ของตัวแปร phrase ส่วน user มี scope เป็น block scope เลยสามารถเรียกใช้ได้

      //   Lab 4
      //   let x = 1;
      //   function func() {
      //     console.log(x); // error เพราะ เรียกดูก่อนการประกาศตัวแปร x ใน function
      //     let x = 2;
      //   }
      //   func();

      //   Lab 5
      // let arr = [1, 2, 3, 4, 5, 6, 7];
      //   function inBetween(num1, num2) {
      //     return function (item) {
      //       return item >= num1 && item <= num2;
      //     };
      //   }

      // function inArray(...arr) {
      //   return function (item, index) {
      //     return item >= arr[index] && item <= arr[index];
      //   };
      // }

      // เฉลย
      // function inArray(...numbers) {
      //   return function (item) {
      //     return numbers.includes(item);
      //   };
      // }

      //   alert(arr.filter(inBetween(3, 6))); // expected: 3,4,5,6
      //   alert(arr.filter((item) => item >= 3 && item <= 6)); // expected: 3,4,5,6
      // alert(arr.filter(inArray(1, 2, 10))); // expected: 1,2
      //   alert(arr.filter((item) => item >= 1 && item <= 2)); // expected: 1,2

      //   Lab 6
      let users = [
        { name: "John", age: 20, surname: "Johnson" },
        { name: "Pete", age: 18, surname: "Peterson" },
        { name: "Ann", age: 19, surname: "Hathaway" },
      ];

      // function byField(key, type) {
      //   return function (a, b) {
      //   console.log(a); // { name: "Pete", age: 18, surname: "Peterson" }
      //     if (!type) {
      //       if (a[key] > b[key]) {
      //         return 1;
      //       } else {
      //         return -1;
      //       }
      //     } else {
      //       return b[key] > a[key] ? 1 : -1;
      //     }
      //   };
      // }

      // เฉลย
      const byField =
        (key, type = "asc") =>
        (a, b) => {
          if (type === "desc") {
            return b[key] > a[key] ? 1 : -1;
          } else {
            return a[key] > b[key] ? 1 : -1;
          }
        };

      // console.log(users.sort(byField("name"))); // asc
      console.log(users.sort(byField("age", "desc"))); // desc
    </script>
  </body>
</html>
